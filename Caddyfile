{
    admin off
}

:{$PORT} {
    # Video streaming
    handle /play/* {
        reverse_proxy 127.0.0.1:5002 {
            header_up Access-Control-Allow-Origin "*"
            header_up Access-Control-Allow-Methods "GET, POST, OPTIONS"
            header_up Access-Control-Allow-Headers "Origin, Content-Type, Accept, Range"
            header_up Access-Control-Expose-Headers "Content-Length, Content-Range"
            header_up Range {>Range}
        }
    }

    # EPG API
    handle /epg/* {
        reverse_proxy 127.0.0.1:5002 {
            header_up Access-Control-Allow-Origin "*"
            header_up Access-Control-Allow-Methods "GET, POST, OPTIONS"
            header_up Access-Control-Allow-Headers "Origin, Content-Type, Accept"
        }
    }

    # Catch all other requests
    handle {
        reverse_proxy 127.0.0.1:5002 {
            header_up Access-Control-Allow-Origin "*"
            header_up Access-Control-Allow-Methods "GET, POST, OPTIONS"
            header_up Access-Control-Allow-Headers "Origin, Content-Type, Accept"
        }
    }
}
